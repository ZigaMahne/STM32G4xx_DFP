<?xml version="1.0" encoding="UTF-8"?>
<package schemaVersion="1.7.36" xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xs:noNamespaceSchemaLocation="https://raw.githubusercontent.com/Open-CMSIS-Pack/Open-CMSIS-Pack-Spec/v1.7.36/schema/PACK.xsd">
  <vendor>Keil</vendor>
  <name>STM32G4xx_DFP</name>
  <description overview="Documents/OVERVIEW.md">STMicroelectronics STM32G4 Series Device Support</description>
  <url>https://www.keil.com/pack/</url>
  <repository type="git">https://github.com/Open-CMSIS-Pack/STM32G4xx_DFP.git</repository>
  <license>LICENSES</license>
  <licenseSets>
    <licenseSet id="all" default="true" gating="true">
      <license title="Apache-2.0 License for CMSIS add-ons"                  name="LICENSE-Apache-2.0"   spdx="Apache-2.0"/>
      <license title="BSD-3-Clause License for STMicroelectronics STM32 HAL" name="LICENSE-BSD-3-Clause" spdx="BSD-3-Clause"/>
    </licenseSet>
  </licenseSets>

  <releases>
    <release version="2.0.2-dev">
      Active development ...
      Updated debug configuration files
      Updated documentation references
      Updateed Templates:
      - Added DWARF-5 debug information
      - Added generated output files
      Package Description (pdsc):
      - Shortened device family description
      - Added Ddsp processor attribute
    </release>
    <release version="1.6.0" date="2024-05-03">
      Updated STM32Cube FW to STM32Cube_FW_G4_V1.5.2 (HAL V1.2.3).
      Device Support:
      - Flash Option Bytes template files can be added to the project as a user template.
      - Updated SVD files.
      Board Examples:
      - Updated STM32G474E-EVAL CMSIS-RTOS2 Blinky example to CMSIS_6.
      CMSIS-Driver:
      - USART: 
       -- Corrected Flow Control capabilities
       -- Removed Rx Timeout capability and event signalization
      - Improved documentation
    </release>
    <release version="1.5.0" date="2022-06-29">
      CMSIS-Driver:
      - USART: Added CMSIS Driver
      - SPI: Added CMSIS Driver
      -- Corrected Control function to support more than 16 data bits in DMA mode
      CMSIS Flash:
      - rebuild current algorithms.
      Board Examples:
      - Overwritten default HAL_InitTick function.
      Package Description (pdsc):
      - Added RAMstart and RAMsize attributes to Flash Algorithm elements.
    </release>
    <release version="1.4.0" date="2021-07-22">
      CMSIS Flash:
      - Added external Flash Algorithm for STM32G474E-EVAL.
      - Added Option Byte Flash Algorithm example.
      Board Examples:
      - STM32G474E-EVAL:
      -- Migrated example to STM32CubeG4 Firmware Package version V1.4.0.
      -- Changed default compiler to Arm Compiler 6.
      -- Changed Assembler option to armclang (Auto Select).
      -- Updated RTX config files to CMSIS 5.8.0.
    </release>
    <release version="1.3.0" date="2021-03-24">
      CMSIS Device Support:
      - Updated STM32Cube Firmware G4 library to version V1.4.0.
      - Updated SVD files.
      - Updated documentation.
      CMSIS Flash Algorithm:
      - Adding support to the QSPI external Loader for the STM32G474E-EVAL.
      - Adding internal flash algorithm support for 128k dual bank devices.
      - Fixing internal flash last word programming.
      - Fixing internal flash extra sector erasing on dual bank mode for dual bank config devices.
      Added global define USE_HAL_DRIVER and USE_FULL_LL_DRIVER to the component ::Device:STM32Cube Framework:STM32CubeMX.
      Added debugProbe to board description.
    </release>
    <release version="1.2.0" date="2020-08-03">
      Added devices:
      - STM32G491xxxx, STM32G4A1xxxx and STM32G483xx series.
      - STM32G474Px/STM32G484Px/STM32G473Px/STM32G483Px BGA121 variants.
      - STM32G431MBTx, STM32G441MBTx variants.
      Updated STM32CubeG4 Firmware Package to V1.3.0.
      - Updated svd files
      - Fixed flash programming algorithm issue for the STM32G4xxxC devices to support both Dual/Single Bank configuration in STM32G4xx_256.FLM.
      - Updated the Flash category 3 (512kB) with one FLM that supports the D/S Bank config.
      FrameworkCubeMX_gpdsc.ftl:
      - Added support for Timebase Source TIMx
      Updated example:
      - Terminating app_main thread with osThreadExit() to avoid endless loop
    </release>
    <release version="1.1.0" date="2019-05-28">
      Initial public release of STM32G4 Series Device Support:
      - Requires STM32CubeMX Version 5.2 or higher and STM32CubeG4 Firmware Package V1.0.0
      Added debug sequences:
      - configure ETM Trace.
      Added board support for STM32G474E-EVAL:
      - Added Blinky example.
    </release>
    <!--
    <release version="1.0.0">
    first release - internal
    </release>
    -->
  </releases>

  <keywords>
    <keyword>ST</keyword>
    <keyword>Device Support</keyword>
    <keyword>Device Family Package STMicroelectronics</keyword>
    <keyword>STM32G4</keyword>
    <keyword>STM32G4xx</keyword>
  </keywords>

  <devices>
    <family Dfamily="STM32G4 Series" Dvendor="STMicroelectronics:13">
      <processor Dcore="Cortex-M4" DcoreVersion="r0p1" Dendian="Little-endian" Dfpu="1" Dmpu="1" Ddsp="DSP"/>
      <book name="https://developer.arm.com/documentation/dui0553/latest/" title="Arm Cortex-M4 Generic User Guide"/>
      <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4xx Reference Manual"/>

        <algorithm name="CMSIS/Flash/MT25QL512ABB_STM32G474E-EVAL.FLM"    start="0x90000000" size="0x08000000" RAMstart="0x20000000" RAMsize="0xA0000" default="0" />

      <description>
High-performance STM32G4 MCUs with Arm Cortex-M4 core, MPU, DSP, FPU, 213 DMIPS at 170MHz.
      </description>

      <sequences>
        <!-- Override for Pre-Defined Sequences -->
        <sequence name="DebugDeviceUnlock">
          <block>
            Sequence("CheckID");
          </block>
        </sequence>

        <sequence name="DebugCoreStart">
          <block>
            // Replication of Standard Functionality
            Write32(0xE000EDF0, 0xA05F0001);                                        // Enable Core Debug via DHCSR
          </block>

          <block info="DbgMCU registers">
            Write32(0xE0042004, DbgMCU_CR);                                         // DBGMCU_CR: Configure MCU Debug
            Write32(0xE0042008, DbgMCU_APB1_Fz1);                                   // DBGMCU_APB1_FZ1: Configure APB1 Peripheral Freeze Behavior
            Write32(0xE004200C, DbgMCU_APB1_Fz2);                                   // DBGMCU_APB1_FZ2: Configure APB1 Peripheral Freeze Behavior
            Write32(0xE0042010, DbgMCU_APB2_Fz);                                    // DBGMCU_APB2_FZ: Configure APB2 Peripheral Freeze Behavior
          </block>
        </sequence>

        <sequence name="TraceStart">
          <block>
            __var traceSWO    = (__traceout &amp; 0x1) != 0;                        // SWO (asynchronous) Trace Selected?
            __var traceTPIU   = (__traceout &amp; 0x2) != 0;                        // TPIU (synchronous) Trace Selected?
          </block>

          <control if="traceSWO">
            <block>
              Sequence("EnableTraceSWO");                                           // Call SWO Trace Setup
            </block>
          </control>

          <control if="traceTPIU">
            <block>
              Sequence("EnableTraceTPIU");                                          // Call TPIU Trace Setup
            </block>
          </control>
        </sequence>

        <sequence name="TraceStop">
          <block>
            // Nothing required for SWO Trace
            __var traceSWO    = (__traceout &amp; 0x1) != 0;                        // SWO enabled?
            __var traceTPIU   = (__traceout &amp; 0x2) != 0;                        // Synchronous trace port enabled?
          </block>

          <control if="traceSWO">
            <block>
              Sequence("DisableTraceSWO");
            </block>
          </control>

          <control if="traceTPIU">
            <block>
              Sequence("DisableTraceTPIU");
            </block>
          </control>
        </sequence>

        <!-- User-Defined Sequences -->
        <sequence name="CheckID">
          <block>
            __var pidr1 = 0;
            __var pidr2 = 0;
            __var jep106id = 0;
            __var ROMTableBase = 0;

            __ap = 0;      // AHB-AP

            ROMTableBase = ReadAP(0xF8) &amp; ~0x3;

            pidr1 = Read32(ROMTableBase + 0x0FE4);
            pidr2 = Read32(ROMTableBase + 0x0FE8);
            jep106id = ((pidr2 &amp; 0x7) &lt;&lt; 4 ) | ((pidr1 &gt;&gt; 4) &amp; 0xF);
          </block>

          <control if="jep106id != 0x20">
            <block>
              Query(0, "Not a genuine ST Device! Abort connection", 1);
              Message(2, "Not a genuine ST Device! Abort connection.");
            </block>
          </control>
        </sequence>

        <sequence name="EnableTraceSWO">
          <block>
            __var dbgmcu_val       = 0;                                                   // DBGMCU_CR Value
            __var dbgmcu_trace_val = 0;                                                   // DBGMCU_CR Value

            dbgmcu_val        = Read32(0xE0042004) &amp; (~0xE0);                         // Read DBGMCU_CR and clear trace setup
            dbgmcu_trace_val  = (1 &lt;&lt; 5);                                           // Trace I/O Enable + Trace Mode Asynchronous

            Sequence("ConfigureTraceSWOPin");
          </block>

          <block info="configure Trace I/O Enable + Trace Mode Asynchronous">
            Write32(0xE0042004, dbgmcu_val | dbgmcu_trace_val);                           // Write DBGMCU_CR: Trace Settings
          </block>
        </sequence>

        <sequence name="DisableTraceSWO">
          <block>
            __var dbgmcu_val       = 0;                                                   // DBGMCU_CR Value
          </block>

          <block info="unconfigure Trace I/O Enable + Trace Mode Asynchronous">
            dbgmcu_val = Read32(0xE0042004) &amp; (~0xE0);                                // Read DBGMCU_CR and clear trace setup
            Write32(0xE0042004, dbgmcu_val);                                              // Write DBGMCU_CR: Trace Settings
          </block>
        </sequence>

        <sequence name="EnableTraceTPIU">
          <block>
            __var width            = (__traceout &amp; 0x003F0000) &gt;&gt; 16;
            __var dbgmcu_val       = 0;                                                   // DBGMCU_CR Value
            __var dbgmcu_trace_val = 0;                                                   // DBGMCU_CR Value

            dbgmcu_val        = Read32(0xE0042004) &amp; (~0xE0);                         // Read DBGMCU_CR and clear trace setup

            Sequence("ConfigureTraceTPIUPins");
          </block>

          <control if="width &gt;= 1" info="TPIU port width 1">
            <block info="configure Trace I/O Enable + Trace Mode Synchronous 1 bit">
              dbgmcu_trace_val  = (3 &lt;&lt; 5);
            </block>
          </control>

          <control if="width &gt;= 2" info="TPIU port width 2">
            <block info="configure Trace I/O Enable + Trace Mode Synchronous 2 bit">
              dbgmcu_trace_val  = (5 &lt;&lt; 5);
            </block>
          </control>

          <control if="width &gt;= 4" info="TPIU port width 4">
            <block info="configure Trace I/O Enable + Trace Mode Synchronous 4 bit">
              dbgmcu_trace_val  = (7 &lt;&lt; 5);
            </block>
          </control>

          <block info="configure Trace I/O Enable + Trace Mode Asynchronous">
            Write32(0xE0042004, dbgmcu_val | dbgmcu_trace_val);                           // Write DBGMCU_CR: Trace Settings
          </block>
        </sequence>

        <sequence name="DisableTraceTPIU">
          <block>
            __var dbgmcu_val       = 0;                                                   // DBGMCU_CR Value
          </block>

          <block info="unconfigure Trace I/O Enable + Trace Mode Synchronous">
            dbgmcu_val = Read32(0xE0042004) &amp; (~0xE0);                                // Read DBGMCU_CR and clear trace setup
            Write32(0xE0042004, dbgmcu_val);                                              // Write DBGMCU_CR: Trace Settings
          </block>
        </sequence>

        <sequence name="ConfigureTraceSWOPin">
          <block>
            __var pin     = 0;
            __var port    = 0;
            __var portAdr = 0;
            __var pos     = 0;

            __var SWO_Pin = 0x00010003;          // PB3
          </block>

            <!-- configure SWO -->
            <block info="configure SWO">
              pin     =               ((SWO_Pin            ) &amp; 0x0000FFFF);
              port    =               ((SWO_Pin &gt;&gt; 16) &amp; 0x0000FFFF);
              portAdr = 0x48000000 + (((SWO_Pin &gt;&gt; 16) &amp; 0x0000FFFF) * 0x400);

              pos = pin * 2;
              Write32(0x4002104C,     ((Read32(0x4002104C    )                         ) | (1 &lt;&lt; port)) );  // RCC_AHB2ENR:   IO port clock enable
              Write32(portAdr + 0x00, ((Read32(portAdr + 0x00) &amp; ~( 3 &lt;&lt; pos)) | (2 &lt;&lt; pos )) );  // GPIOx_MODER:   Set Mode (Alternate Function)
              Write32(portAdr + 0x08, ((Read32(portAdr + 0x08)                         ) | (3 &lt;&lt; pos )) );  // GPIOx_OSPEEDR: Set Speed (Very High Speed)
              Write32(portAdr + 0x0C, ((Read32(portAdr + 0x0C) &amp; ~( 3 &lt;&lt; pos))                    ) );  // GPIOx_PUPDR:   Set I/O to no pull-up/pull-down
            </block>
            <control if="pin &lt;  8">
              <block>
              pos = ((pin    ) &amp; 7) * 4;
              Write32(portAdr + 0x20, ((Read32(portAdr + 0x20) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRL:    Alternate Function to AF0
              </block>
            </control>
            <control if="pin &gt;= 8">
              <block>
              pos = ((pin - 8) &amp; 7) * 4;
              Write32(portAdr + 0x24, ((Read32(portAdr + 0x24) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRH:    Alternate Function to AF0
              </block>
            </control>
        </sequence>

        <sequence name="ConfigureTraceTPIUPins">
          <block>
            __var pin     = 8;
            __var port    = 0;
            __var portAdr = 0;
            __var pos     = 0;

            __var width   = (__traceout &amp; 0x003F0000) &gt;&gt; 16;
          </block>

            <!-- configure TRACECLK -->
            <block info="configure TRACECLK">
              pin     =                (TraceClk_Pin            ) &amp; 0x0000FFFF;
              port    =                (TraceClk_Pin &gt;&gt; 16) &amp; 0x0000FFFF;
              portAdr = 0x48000000 + (((TraceClk_Pin &gt;&gt; 16) &amp; 0x0000FFFF) * 0x400);

              pos = pin * 2;
              Write32(0x4002104C,     ((Read32(0x4002104C    )                         ) | (1 &lt;&lt; port)) );  // RCC_AHB2ENR:   IO port clock enable
              Write32(portAdr + 0x00, ((Read32(portAdr + 0x00) &amp; ~( 3 &lt;&lt; pos)) | (2 &lt;&lt; pos )) );  // GPIOx_MODER:   Set Mode (Alternate Function)
              Write32(portAdr + 0x08, ((Read32(portAdr + 0x08)                         ) | (3 &lt;&lt; pos )) );  // GPIOx_OSPEEDR: Set Speed (Very High Speed)
              Write32(portAdr + 0x0C, ((Read32(portAdr + 0x0C) &amp; ~( 3 &lt;&lt; pos))                    ) );  // GPIOx_PUPDR:   Set I/O to no pull-up/pull-down
            </block>
            <control if="pin &lt;  8">
              <block>
              pos = ((pin    ) &amp; 7) * 4;
              Write32(portAdr + 0x20, ((Read32(portAdr + 0x20) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRL:    Alternate Function to AF0
              </block>
            </control>
            <control if="pin &gt;= 8">
              <block>
              pos = ((pin - 8) &amp; 7) * 4;
              Write32(portAdr + 0x24, ((Read32(portAdr + 0x24) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRH:    Alternate Function to AF0
              </block>
            </control>

          <control if="width &gt;= 1" info="TPIU port width 1">
            <!-- configure TRACED0 -->
            <block info="configure TRACED0">
              pin     =                (TraceD0_Pin            ) &amp; 0x0000FFFF;
              port    =                (TraceD0_Pin &gt;&gt; 16) &amp; 0x0000FFFF;
              portAdr = 0x48000000 + (((TraceD0_Pin &gt;&gt; 16) &amp; 0x0000FFFF) * 0x400);

              pos = pin * 2;
              Write32(0x4002104C,     ((Read32(0x4002104C    )                         ) | (1 &lt;&lt; port)) );  // RCC_AHB2ENR:   IO port clock enable
              Write32(portAdr + 0x00, ((Read32(portAdr + 0x00) &amp; ~( 3 &lt;&lt; pos)) | (2 &lt;&lt; pos )) );  // GPIOx_MODER:   Set Mode (Alternate Function)
              Write32(portAdr + 0x08, ((Read32(portAdr + 0x08)                         ) | (3 &lt;&lt; pos )) );  // GPIOx_OSPEEDR: Set Speed (Very High Speed)
              Write32(portAdr + 0x0C, ((Read32(portAdr + 0x0C) &amp; ~( 3 &lt;&lt; pos))                    ) );  // GPIOx_PUPDR:   Set I/O to no pull-up/pull-down
            </block>
            <control if="pin &lt;  8">
              <block>
              pos = ((pin    ) &amp; 7) * 4;
              Write32(portAdr + 0x20, ((Read32(portAdr + 0x20) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRL:    Alternate Function to AF0
              </block>
            </control>
            <control if="pin &gt;= 8">
              <block>
              pos = ((pin - 8) &amp; 7) * 4;
              Write32(portAdr + 0x24, ((Read32(portAdr + 0x24) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRH:    Alternate Function to AF0
              </block>
            </control>
          </control>

          <control if="width &gt;= 2" info="TPIU port width 2">
            <!-- configure TRACED1 -->
            <block info="configure TRACED1">
              pin     =                (TraceD1_Pin            ) &amp; 0x0000FFFF;
              port    =                (TraceD1_Pin &gt;&gt; 16) &amp; 0x0000FFFF;
              portAdr = 0x48000000 + (((TraceD1_Pin &gt;&gt; 16) &amp; 0x0000FFFF) * 0x400);

              pos = pin * 2;
              Write32(0x4002104C,     ((Read32(0x4002104C    )                         ) | (1 &lt;&lt; port)) );  // RCC_AHB2ENR:   IO port clock enable
              Write32(portAdr + 0x00, ((Read32(portAdr + 0x00) &amp; ~( 3 &lt;&lt; pos)) | (2 &lt;&lt; pos )) );  // GPIOx_MODER:   Set Mode (Alternate Function)
              Write32(portAdr + 0x08, ((Read32(portAdr + 0x08)                         ) | (3 &lt;&lt; pos )) );  // GPIOx_OSPEEDR: Set Speed (Very High Speed)
              Write32(portAdr + 0x0C, ((Read32(portAdr + 0x0C) &amp; ~( 3 &lt;&lt; pos))                    ) );  // GPIOx_PUPDR:   Set I/O to no pull-up/pull-down
            </block>
            <control if="pin &lt;  8">
              <block>
              pos = ((pin    ) &amp; 7) * 4;
              Write32(portAdr + 0x20, ((Read32(portAdr + 0x20) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRL:    Alternate Function to AF0
              </block>
            </control>
            <control if="pin &gt;= 8">
              <block>
              pos = ((pin - 8) &amp; 7) * 4;
              Write32(portAdr + 0x24, ((Read32(portAdr + 0x24) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRH:    Alternate Function to AF0
              </block>
            </control>
          </control>

          <control if="width &gt;= 4" info="TPIU port width 4">
            <!-- configure TRACED2 -->
            <block info="configure TRACED2">
              pin     =                (TraceD2_Pin            ) &amp; 0x0000FFFF;
              port    =                (TraceD2_Pin &gt;&gt; 16) &amp; 0x0000FFFF;
              portAdr = 0x48000000 + (((TraceD2_Pin &gt;&gt; 16) &amp; 0x0000FFFF) * 0x400);

              pos = pin * 2;
              Write32(0x4002104C,     ((Read32(0x4002104C    )                         ) | (1 &lt;&lt; port)) );  // RCC_AHB2ENR:   IO port clock enable
              Write32(portAdr + 0x00, ((Read32(portAdr + 0x00) &amp; ~( 3 &lt;&lt; pos)) | (2 &lt;&lt; pos )) );  // GPIOx_MODER:   Set Mode (Alternate Function)
              Write32(portAdr + 0x08, ((Read32(portAdr + 0x08)                         ) | (3 &lt;&lt; pos )) );  // GPIOx_OSPEEDR: Set Speed (Very High Speed)
              Write32(portAdr + 0x0C, ((Read32(portAdr + 0x0C) &amp; ~( 3 &lt;&lt; pos))                    ) );  // GPIOx_PUPDR:   Set I/O to no pull-up/pull-down
            </block>
            <control if="pin &lt;  8">
              <block>
              pos = ((pin    ) &amp; 7) * 4;
              Write32(portAdr + 0x20, ((Read32(portAdr + 0x20) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRL:    Alternate Function to AF0
              </block>
            </control>
            <control if="pin &gt;= 8">
              <block>
              pos = ((pin - 8) &amp; 7) * 4;
              Write32(portAdr + 0x24, ((Read32(portAdr + 0x24) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRH:    Alternate Function to AF0
              </block>
            </control>

            <!-- configure TRACED3 -->
            <block info="configure TRACED3">
              pin     =                (TraceD3_Pin            ) &amp; 0x0000FFFF;
              port    =                (TraceD3_Pin &gt;&gt; 16) &amp; 0x0000FFFF;
              portAdr = 0x48000000 + (((TraceD3_Pin &gt;&gt; 16) &amp; 0x0000FFFF) * 0x400);

              pos = pin * 2;
              Write32(0x4002104C,     ((Read32(0x4002104C    )                         ) | (1 &lt;&lt; port)) );  // RCC_AHB2ENR:   IO port clock enable
              Write32(portAdr + 0x00, ((Read32(portAdr + 0x00) &amp; ~( 3 &lt;&lt; pos)) | (2 &lt;&lt; pos )) );  // GPIOx_MODER:   Set Mode (Alternate Function)
              Write32(portAdr + 0x08, ((Read32(portAdr + 0x08)                         ) | (3 &lt;&lt; pos )) );  // GPIOx_OSPEEDR: Set Speed (Very High Speed)
              Write32(portAdr + 0x0C, ((Read32(portAdr + 0x0C) &amp; ~( 3 &lt;&lt; pos))                    ) );  // GPIOx_PUPDR:   Set I/O to no pull-up/pull-down
            </block>
            <control if="pin &lt;  8">
              <block>
              pos = ((pin    ) &amp; 7) * 4;
              Write32(portAdr + 0x20, ((Read32(portAdr + 0x20) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRL:    Alternate Function to AF0
              </block>
            </control>
            <control if="pin &gt;= 8">
              <block>
              pos = ((pin - 8) &amp; 7) * 4;
              Write32(portAdr + 0x24, ((Read32(portAdr + 0x24) &amp; ~(15 &lt;&lt; pos))                    ) );  // GPIOx_AFRH:    Alternate Function to AF0
              </block>
            </control>
          </control>
        </sequence>

        <!-- default DebugPortStop extended with Option Byte Loading capability -->
        <sequence name="DebugPortStop">
          <block>
            __var connectionFlash = ( __connection &amp; 0xF ) == 2 ;
            __var FLASH_BASE = 0x40022000 ;
            __var FLASH_CR = FLASH_BASE + 0x14 ;
            __var OBL_LAUNCH_BIT = ( 1 &lt;&lt; 27 ) ;
            __var LOCK_BIT = ( 1 &lt;&lt; 31 ) ;
            __var OPTLOCK_BIT = ( 1 &lt;&lt; 30 ) ;
            __var FLASH_KEYR = FLASH_BASE + 0x08 ;
            __var FLASH_KEY1 = 0x45670123 ;
            __var FLASH_KEY2 = 0xCDEF89AB ;
            __var FLASH_OPTKEYR = FLASH_BASE + 0x0C ;
            __var FLASH_OPTKEY1 = 0x08192A3B ;
            __var FLASH_OPTKEY2 = 0x4C5D6E7F ;
            __var FLASH_CR_Value = 0 ;
            __var DoDebugPortStop = 1 ;
            __var DP_CTRL_STAT = 0x4 ;
            __var DP_SELECT = 0x8 ;
          </block>

          <control if="connectionFlash &amp;&amp; DoOptionByteLoading">
            <block>
              // unlock the FLASH_CR
              Write32( FLASH_KEYR, FLASH_KEY1 ) ;
              Write32( FLASH_KEYR, FLASH_KEY2 ) ;
              // unlock the option byte block
              Write32( FLASH_OPTKEYR, FLASH_OPTKEY1 ) ;
              Write32( FLASH_OPTKEYR, FLASH_OPTKEY2 ) ;
              FLASH_CR_Value = Read32( FLASH_CR ) ;
            </block>
            <control if="!( FLASH_CR_Value &amp; ( ( LOCK_BIT ) | ( OPTLOCK_BIT ) ) )">
              <block>
                DoDebugPortStop = 0 ;
                __errorcontrol = 1 ;
                // write OBL_LAUNCH bit (causes a reset)
                Write32( FLASH_CR, FLASH_CR_Value | ( OBL_LAUNCH_BIT ) ) ;
                __errorcontrol = 0 ;
              </block>
            </control>
          </control>
          <control if="DoDebugPortStop">
            <block>
              // Switch to DP Register Bank 0
              WriteDP(DP_SELECT, 0x00000000);
              // Power Down Debug port
              WriteDP(DP_CTRL_STAT, 0x00000000);
            </block>
          </control>
        </sequence>
      </sequences>

      <!-- ************************  Subfamily 'STM32G431'  **************************** -->
      <subFamily DsubFamily="STM32G431">
        <processor Dclock="170000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>
        <book name="https://www.st.com/resource/en/datasheet/stm32g431c6.pdf" title="STM32G431xx Data Sheet"/>

        <compile define="STM32G431xx"/>
        <debug svd="CMSIS/SVD/STM32G431.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                   start="0x20000000" size="0x00008000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_SB_OPT.FLM" start="0x1FFF7800" size="0x00000018" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- ################################### 128 KB ################################### -->
        <!-- *************************  Device 'STM32G431CB'  ***************************** -->
        <device Dname="STM32G431CBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G431CBUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G431CBYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="49"/>
        </device>

        <!-- *************************  Device 'STM32G431KB'  ***************************** -->
        <device Dname="STM32G431KBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>
        <device Dname="STM32G431KBUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>

        <!-- *************************  Device 'STM32G431RB'  ***************************** -->
        <device Dname="STM32G431RBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1"  />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>
        <device Dname="STM32G431RBIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G431VB'  ***************************** -->
        <device Dname="STM32G431VBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G431MB'  ***************************** -->
        <device Dname="STM32G431MBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- ################################### 64 KB ################################### -->
        <!-- *************************  Device 'STM32G431C8'  ***************************** -->
        <device Dname="STM32G431C8Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G431C8Ux">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G431K8'  ***************************** -->
        <device Dname="STM32G431K8Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>
        <device Dname="STM32G431K8Ux">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>

        <!-- *************************  Device 'STM32G431M8'  ***************************** -->
        <device Dname="STM32G431M8Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G431R8'  ***************************** -->
        <device Dname="STM32G431R8Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>
        <device Dname="STM32G431R8Ix">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G431V8'  ***************************** -->
        <device Dname="STM32G431V8Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00010000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_64.FLM"  start="0x08000000" size="0x00010000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>

        <!-- ################################### 32 KB ################################### -->
        <!-- *************************  Device 'STM32G431C6'  ***************************** -->
        <device Dname="STM32G431C6Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G431C6Ux">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G431K6'  ***************************** -->
        <device Dname="STM32G431K6Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>
        <device Dname="STM32G431K6Ux">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>

        <!-- *************************  Device 'STM32G431M6'  ***************************** -->
        <device Dname="STM32G431M6Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G431R6'  ***************************** -->
        <device Dname="STM32G431R6Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>
        <device Dname="STM32G431R6Ix">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G431V6'  ***************************** -->
        <device Dname="STM32G431V6Tx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00008000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_32.FLM"  start="0x08000000" size="0x00008000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G441'  **************************** -->
      <subFamily DsubFamily="STM32G441">
        <processor Dclock="150000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>        
        <book name="https://www.st.com/resource/en/datasheet/stm32g441cb.pdf" title="STM32G441xx Data Sheet"/>

        <compile define="STM32G441xx"/>
        <debug svd="CMSIS/SVD/STM32G441.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                   start="0x20000000" size="0x00008000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_SB_OPT.FLM" start="0x1FFF7800" size="0x00000018" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- ################################### 128 KB ################################### -->
        <!-- *************************  Device 'STM32G441CB'  ***************************** -->
        <device Dname="STM32G441CBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G441CBUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G441CBYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="49"/>
        </device>

        <!-- *************************  Device 'STM32G441KB'  ***************************** -->
        <device Dname="STM32G441KBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>
        <device Dname="STM32G441KBUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>

        <!-- *************************  Device 'STM32G441RB'  ***************************** -->
        <device Dname="STM32G441RBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>
        <device Dname="STM32G441RBIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G441VB'  ***************************** -->
        <device Dname="STM32G441VBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G441MB'  ***************************** -->
        <device Dname="STM32G441MBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G43x-4x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G471'  **************************** -->
      <subFamily DsubFamily="STM32G471">
        <processor Dclock="170000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>

        <compile define="STM32G471xx"/>
        <debug svd="CMSIS/SVD/STM32G471.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
           __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                      start="0x20000000" size="0x00020000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_DB_OPT.FLM"    start="0x1FFF7800" size="0x00000054" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- ################################### 512 KB ################################## -->
        <!-- *************************  Device 'STM32G471CE'  ***************************** -->
        <device Dname="STM32G471CETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G471CEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G471ME'  ***************************** -->
        <device Dname="STM32G471METx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G471MEYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="81"/>
        </device>

        <!-- *************************  Device 'STM32G471RE'  ***************************** -->
        <device Dname="STM32G471RETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G471VE'  ***************************** -->
        <device Dname="STM32G471VETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G471VEHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G471VEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G471QE'  ***************************** -->
        <device Dname="STM32G471QETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- ################################### 256 KB ################################## -->
        <!-- *************************  Device 'STM32G471CC'  ***************************** -->
        <device Dname="STM32G471CCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G471CCUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G471MC'  ***************************** -->
        <device Dname="STM32G471MCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G471QC'  ***************************** -->
        <device Dname="STM32G471QCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G471RC'  ***************************** -->
        <device Dname="STM32G471RCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G471VC'  ***************************** -->
        <device Dname="STM32G471VCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G471VCHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G471VCIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G473'  **************************** -->
      <subFamily DsubFamily="STM32G473">
        <processor Dclock="150000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>
        <book name="https://www.st.com/resource/en/datasheet/stm32g473cb.pdf" title="STM32G473xx Data Sheet"/>

        <compile define="STM32G473xx"/>
        <debug svd="CMSIS/SVD/STM32G473.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                      start="0x20000000" size="0x00020000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_DB_OPT.FLM"    start="0x1FFF7800" size="0x00000054" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- #################################### 512 KB ################################# -->
        <!-- *************************  Device 'STM32G473CE'  ***************************** -->
        <device Dname="STM32G473CETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G473CEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G473ME'  ***************************** -->
        <device Dname="STM32G473METx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G473MEYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="81"/>
        </device>

        <!-- *************************  Device 'STM32G473RE'  ***************************** -->
        <device Dname="STM32G473RETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G473VE'  ***************************** -->
        <device Dname="STM32G473VETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G473VEHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G473VEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G473QE'  ***************************** -->
        <device Dname="STM32G473QETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G473PE'  ***************************** -->
        <device Dname="STM32G473PEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>

        <!-- #################################### 256 KB ################################# -->
        <!-- *************************  Device 'STM32G473CC'  ***************************** -->
        <device Dname="STM32G473CCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G473CCUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G473MC'  ***************************** -->
        <device Dname="STM32G473MCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G473QC'  ***************************** -->
        <device Dname="STM32G473QCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G473RC'  ***************************** -->
        <device Dname="STM32G473RCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G473VC'  ***************************** -->
        <device Dname="STM32G473VCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G473VCHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G473VCIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G473PC'  ***************************** -->
        <device Dname="STM32G473PCIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>

        <!-- #################################### 128 KB ################################# -->
        <!-- *************************  Device 'STM32G473CB'  ***************************** -->
        <device Dname="STM32G473CBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G473CBUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G473MB'  ***************************** -->
        <device Dname="STM32G473MBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G473QB'  ***************************** -->
        <device Dname="STM32G473QBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G473RB'  ***************************** -->
        <device Dname="STM32G473RBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G473VB'  ***************************** -->
        <device Dname="STM32G473VBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G473VBHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G473VBIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G473PB'  ***************************** -->
        <device Dname="STM32G473PBIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G474'  **************************** -->
      <subFamily DsubFamily="STM32G474">
        <processor Dclock="170000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>
        <book name="https://www.st.com/resource/en/datasheet/stm32g474cb.pdf" title="STM32G474xx Data Sheet"/>

        <compile define="STM32G474xx"/>
        <debug svd="CMSIS/SVD/STM32G474.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                      start="0x20000000" size="0x00020000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_DB_OPT.FLM"    start="0x1FFF7800" size="0x00000054" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- ################################### 512 KB ################################## -->
        <!-- *************************  Device 'STM32G474CE'  ***************************** -->
        <device Dname="STM32G474CETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G474CEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G474RE'  ***************************** -->
        <device Dname="STM32G474RETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G474VE'  ***************************** -->
        <device Dname="STM32G474VETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G474VEHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G474VEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G474ME'  ***************************** -->
        <device Dname="STM32G474METx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G474MEYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="81"/>
        </device>

        <!-- *************************  Device 'STM32G474QE'  ***************************** -->
        <device Dname="STM32G474QETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G474PE'  ***************************** -->
        <device Dname="STM32G474PEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>

        <!-- ################################### 256 KB ################################## -->
        <!-- *************************  Device 'STM32G474CC'  ***************************** -->
        <device Dname="STM32G474CCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G474CCUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G474MC'  ***************************** -->
        <device Dname="STM32G474MCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G474QC'  ***************************** -->
        <device Dname="STM32G474QCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

         <!-- *************************  Device 'STM32G474RC'  ***************************** -->
        <device Dname="STM32G474RCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G474VC'  ***************************** -->
        <device Dname="STM32G474VCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G474VCHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G474VCIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G474PC'  ***************************** -->
        <device Dname="STM32G474PCIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>

        <!-- #################################### 128 KB ################################## -->
        <!-- *************************  Device 'STM32G474CB'  ***************************** -->
        <device Dname="STM32G474CBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G474CBUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G474RB'  ***************************** -->
        <device Dname="STM32G474RBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G474VB'  ***************************** -->
        <device Dname="STM32G474VBHx">
         <memory name="Main_Flash" access="rx"                    start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G474VBIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G474VBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G474QB'  ***************************** -->
        <device Dname="STM32G474QBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G474MB'  ***************************** -->
        <device Dname="STM32G474MBTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G474PB'  ***************************** -->
        <device Dname="STM32G474PBIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00020000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_128.FLM" start="0x08000000" size="0x00020000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G483'  **************************** -->
      <subFamily DsubFamily="STM32G483">
        <processor Dclock="170000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>
        <book name="https://www.st.com/resource/en/datasheet/stm32g483ce.pdf" title="STM32G483xx Data Sheet"/>

        <compile define="STM32g483xx"/>
        <debug svd="CMSIS/SVD/STM32G483.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                      start="0x20000000" size="0x00020000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_DB_OPT.FLM"    start="0x1FFF7800" size="0x00000054" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- #################################### 512 KB ################################# -->
        <!-- *************************  Device 'STM32G483CE'  ***************************** -->
        <device Dname="STM32G483CETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G483CEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G483ME'  ***************************** -->
        <device Dname="STM32G483METx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G483MEYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="81"/>
        </device>

        <!-- *************************  Device 'STM32G483RE'  ***************************** -->
        <device Dname="STM32G483RETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G483VE'  ***************************** -->
        <device Dname="STM32G483VETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G483VEHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G483VEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G483QE'  ***************************** -->
        <device Dname="STM32G483QETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G483PE'  ***************************** -->
        <device Dname="STM32G483PEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G484'  **************************** -->
      <subFamily DsubFamily="STM32G484">
        <processor Dclock="150000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>
        <book name="https://www.st.com/resource/en/datasheet/stm32g484ce.pdf" title="STM32G484xx Data Sheet"/>

        <compile define="STM32G484xx"/>
        <debug svd="CMSIS/SVD/STM32G484.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                      start="0x20000000" size="0x00020000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_DB_OPT.FLM"    start="0x1FFF7800" size="0x00000054" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- #################################### 512 KB ################################# -->
        <!-- *************************  Device 'STM32G484CE'  ***************************** -->
        <device Dname="STM32G484CETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G484CEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G484RE'  ***************************** -->
        <device Dname="STM32G484RETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G484VE'  ***************************** -->
        <device Dname="STM32G484VETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
        <device Dname="STM32G484VEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>
        <device Dname="STM32G484VEHx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="100"/>
        </device>

        <!-- *************************  Device 'STM32G484ME'  ***************************** -->
        <device Dname="STM32G484METx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G484MEYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="81"/>
        </device>

        <!-- *************************  Device 'STM32G484QE'  ***************************** -->
        <device Dname="STM32G484QETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="128"/>
        </device>

        <!-- *************************  Device 'STM32G484PE'  ***************************** -->
        <device Dname="STM32G484PEIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G47x-8x_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="121"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G491'  **************************** -->
      <subFamily DsubFamily="STM32G491">
        <processor Dclock="170000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>
        <book name="https://www.st.com/resource/en/datasheet/stm32g491cc.pdf" title="STM32G491xx Data Sheet"/>

        <compile define="STM32G491xx"/>
        <debug svd="CMSIS/SVD/STM32G491.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                      start="0x20000000" size="0x0001C000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_SB_OPT.FLM"    start="0x1FFF7800" size="0x00000018" RAMstart="0x20000000" RAMsize="0x8000" default="0 "/>

        <!-- ################################### 512 KB ################################## -->
        <!-- *************************  Device 'STM32G491CE'  ***************************** -->
        <device Dname="STM32G491CETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G491CEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G491KE'  ***************************** -->
        <device Dname="STM32G491KEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>

        <!-- *************************  Device 'STM32G491ME'  ***************************** -->
        <device Dname="STM32G491METx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G491MESx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G491RE'  ***************************** -->
        <device Dname="STM32G491RETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>
        <device Dname="STM32G491REIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="64"/>
        </device>
        <device Dname="STM32G491REYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G491VE'  ***************************** -->
        <device Dname="STM32G491VETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>

        <!-- ################################### 256 KB ################################## -->
        <!-- *************************  Device 'STM32G491CC'  **************************** -->
        <device Dname="STM32G491CCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G491CCUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G491KC'  ***************************** -->
        <device Dname="STM32G491KCUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>

        <!-- *************************  Device 'STM32G491MC'  ***************************** -->
        <device Dname="STM32G491MCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G491MCSx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G491RC'  ***************************** -->
        <device Dname="STM32G491RCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>
        <device Dname="STM32G491RCIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="64"/>
        </device>

        <!-- *************************  Device 'STM32G491VC'  ***************************** -->
        <device Dname="STM32G491VCTx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00040000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_256.FLM" start="0x08000000" size="0x00040000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
      </subFamily>

      <!-- ************************  Subfamily 'STM32G4A1'  **************************** -->
      <subFamily DsubFamily="STM32G4A1">
        <processor Dclock="170000000"/>
        <book name="https://www.st.com/resource/en/reference_manual/rm0440-stm32g4-series-advanced-armbased-32bit-mcus-stmicroelectronics.pdf" title="STM32G4 Reference Manual"/>
        <book name="https://www.st.com/resource/en/datasheet/stm32g4a1ce.pdf" title="STM32G4A1xE Data Sheet"/>

        <compile define="STM32G4A1xx"/>
        <debug svd="CMSIS/SVD/STM32G4A1.svd"/>

        <debugvars configfile="CMSIS/Debug/STM32G4xx.dbgconf" version="1.0.1">
          __var DbgMCU_CR       = 0x00000007;   // DBGMCU_CR: DBG_SLEEP, DBG_STOP, DBG_STANDBY
          __var DbgMCU_APB1_Fz1 = 0xC060183F;   // DGBMCU_APB1_FZ1: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB1_Fz2 = 0x00000002;   // DGBMCU_APB1_FZ2: Configure APB1 peripheral freeze behavior
          __var DbgMCU_APB2_Fz  = 0x04172800;   // DGBMCU_APB2_FZ : Configure APB2 peripheral freeze behavior
          __var TraceClk_Pin    = 0x00040002;   // PE2
          __var TraceD0_Pin     = 0x00040003;   // PE3
          __var TraceD1_Pin     = 0x00040004;   // PE4
          __var TraceD2_Pin     = 0x00040005;   // PE5
          __var TraceD3_Pin     = 0x00040006;   // PE6
          __var DoOptionByteLoading = 0;        // Disabled
        </debugvars>

        <memory name="SRAM" access="rwx"                      start="0x20000000" size="0x0001C000" default="1" />
        <algorithm name="CMSIS/Flash/STM32G4xx_SB_OPT.FLM"    start="0x1FFF7800" size="0x00000018" RAMstart="0x20000000" RAMsize="0x8000" default="0" />

        <!-- ################################### 512 KB ################################## -->
        <!-- *************************  Device 'STM32G4A1KE'  ***************************** -->
        <device Dname="STM32G4A1KEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="32"/>
        </device>

        <!-- *************************  Device 'STM32G4A1CE'  ***************************** -->
        <device Dname="STM32G4A1CETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>
        <device Dname="STM32G4A1CEUx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="48"/>
        </device>

        <!-- *************************  Device 'STM32G4A1ME'  ***************************** -->
        <device Dname="STM32G4A1METx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>
        <device Dname="STM32G4A1MESx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="80"/>
        </device>

        <!-- *************************  Device 'STM32G4A1RE'  ***************************** -->
        <device Dname="STM32G4A1RETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="64"/>
        </device>
        <device Dname="STM32G4A1REIx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="BGA" n="64"/>
        </device>
        <device Dname="STM32G4A1REYx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="CSP" n="65"/>
        </device>

        <!-- *************************  Device 'STM32G4A1VE'  ***************************** -->
        <device Dname="STM32G4A1VETx">
          <memory name="Main_Flash" access="rx"              start="0x08000000" size="0x00080000" default="1" startup="1" />
          <algorithm name="CMSIS/Flash/STM32G49x-Ax_512.FLM" start="0x08000000" size="0x00080000" RAMstart="0x20000000" RAMsize="0x8000" default="1" />
          <feature type="QFP" n="100"/>
        </device>
      </subFamily>

    </family>

  </devices>

  <conditions>
    <!-- Device Conditions -->
    <condition id="STM32G4">
      <description>STMicroelectronics STM32G4 Series devices</description>
      <require Dvendor="STMicroelectronics:13" Dname="STM32G4*"/>
    </condition>

    <!-- Device + CMSIS Conditions -->
    <condition id="STM32G4 CMSIS">
      <description>STMicroelectronics STM32G4 Device and CMSIS-CORE</description>
      <require condition="STM32G4"/>
      <require Cclass="CMSIS" Cgroup="CORE"/>
    </condition>

  </conditions>

  <components>
    <!-- CubeMX Generator -->
    <component generator="CubeMX" Cclass="Device" Cgroup="CubeMX" Cversion="1.0.0" condition="STM32G4 CMSIS">
      <description>Configuration via STM32CubeMX</description>
      <RTE_Components_h>
        #define RTE_DEVICE_CUBE_MX
        #define CMSIS_device_header "stm32g4xx.h"
      </RTE_Components_h>
      <files>
        <file category="doc" name="https://open-cmsis-pack.github.io/cmsis-toolbox/CubeMX"/>
      </files>
    </component>
  </components>

  <csolution>
    <!-- CubeMX Basic CMSIS Solution template -->
    <template name="CubeMX Basic solution" path="Templates/CubeMX" file="CubeMX.csolution.yml" condition="STM32G4">
      <description>Create a CubeMX basic solution with project</description>
    </template>

  </csolution>
</package>
